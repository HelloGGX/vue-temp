var C=s=>{throw TypeError(s)};var M=(s,t,e)=>t.has(s)||C("Cannot "+e);var o=(s,t,e)=>(M(s,t,"read from private field"),e?e.call(s):t.get(s)),v=(s,t,e)=>t.has(s)?C("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),y=(s,t,e,i)=>(M(s,t,"write to private field"),i?i.call(s,e):t.set(s,e),e),x=(s,t,e)=>(M(s,t,"access private method"),e);import{s as R,d as U,S as K,a as V,h as L,g as B,n as D,b as N,i as I,c as P,e as z,f as A,j as F,u as Q,w as _,o as T,t as H,k as G,l as J,m as W,p as X,r as O,q as Y,v as Z,x as r,y as $,z as E,A as j,B as tt,_ as et}from"./index-Bc6aD954.js";const st=U({id:"login",state:()=>({isLogin:!1}),actions:{async patchLogin(s){this.isLogin=s}}});function ot(){return st(R)}var p,f,d,c,h,S,k,q,it=(q=class extends K{constructor(t,e){super();v(this,h);v(this,p);v(this,f);v(this,d);v(this,c);y(this,p,t),this.setOptions(e),this.bindMethods(),x(this,h,S).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var i;const e=this.options;this.options=o(this,p).defaultMutationOptions(t),V(this.options,e)||o(this,p).getMutationCache().notify({type:"observerOptionsUpdated",mutation:o(this,d),observer:this}),e!=null&&e.mutationKey&&this.options.mutationKey&&L(e.mutationKey)!==L(this.options.mutationKey)?this.reset():((i=o(this,d))==null?void 0:i.state.status)==="pending"&&o(this,d).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=o(this,d))==null||t.removeObserver(this)}onMutationUpdate(t){x(this,h,S).call(this),x(this,h,k).call(this,t)}getCurrentResult(){return o(this,f)}reset(){var t;(t=o(this,d))==null||t.removeObserver(this),y(this,d,void 0),x(this,h,S).call(this),x(this,h,k).call(this)}mutate(t,e){var i;return y(this,c,e),(i=o(this,d))==null||i.removeObserver(this),y(this,d,o(this,p).getMutationCache().build(o(this,p),this.options)),o(this,d).addObserver(this),o(this,d).execute(t)}},p=new WeakMap,f=new WeakMap,d=new WeakMap,c=new WeakMap,h=new WeakSet,S=function(){var e;const t=((e=o(this,d))==null?void 0:e.state)??B();y(this,f,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},k=function(t){D.batch(()=>{var e,i,a,l,b,w,n,m;if(o(this,c)&&this.hasListeners()){const u=o(this,f).variables,g=o(this,f).context;(t==null?void 0:t.type)==="success"?((i=(e=o(this,c)).onSuccess)==null||i.call(e,t.data,u,g),(l=(a=o(this,c)).onSettled)==null||l.call(a,t.data,null,u,g)):(t==null?void 0:t.type)==="error"&&((w=(b=o(this,c)).onError)==null||w.call(b,t.error,u,g),(m=(n=o(this,c)).onSettled)==null||m.call(n,void 0,t.error,u,g))}this.listeners.forEach(u=>{u(o(this,f))})})},q);function nt(s=""){if(!N())throw new Error("vue-query hooks can only be used inside setup() function or functions that support injection context.");const t=P(s),e=I(t);if(!e)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return e}function rt(s,t){const e=nt(),i=z(()=>e.defaultMutationOptions(A(s))),a=new it(e,i.value),l=F(a.getCurrentResult()),b=a.subscribe(u=>{Q(l,u)}),w=(u,g)=>{a.mutate(u,g).catch(()=>{})};_(i,()=>{a.setOptions(i.value)}),T(()=>{b()});const m=H(l);return _(()=>l.error,u=>{if(u&&G(i.value.throwOnError,[u]))throw u}),{...m,mutate:w,mutateAsync:l.mutate,reset:l.reset}}const at=s=>W.post("/api/login",{...s}),ut=({config:s}={})=>{const t=J(),e=ot();return rt({mutationFn:at,onSuccess(i){var a;i.code==="SUCCESS"&&((a=i.data)!=null&&a.loginSuc)&&(e.patchLogin(!0),t.replace({path:"/home"}))},...s})},dt={class:"flex min-h-screen items-center justify-center bg-white px-4 py-12 sm:px-6 lg:px-8"},lt={class:"w-full max-w-md"},ct={class:"bg-white shadow-md rounded-lg px-8 pt-6 pb-8 mb-4"},ht={class:"mt-1"},mt={class:"mt-1"},pt=["disabled"],ft=X({__name:"Login",setup(s){const t=O(""),e=O(""),{mutate:i}=ut(),a=O(!1),l=()=>{a.value=!t.value||!e.value},b=async()=>{l(),!a.value&&i({userName:t.value,userPwd:e.value})};return(w,n)=>(Y(),Z("div",dt,[r("div",lt,[r("div",ct,[n[5]||(n[5]=r("div",{class:"text-center mb-8"},[r("img",{class:"mx-auto h-12 w-auto",src:"https://tailwindui.com/plus/img/logos/mark.svg?color=indigo&shade=600",alt:"您的公司"}),r("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"},"欢迎登录管理系统")],-1)),r("form",{class:"space-y-6",onSubmit:$(b,["prevent"])},[r("div",null,[n[2]||(n[2]=r("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"用户名",-1)),r("div",ht,[E(r("input",{id:"username",name:"username",type:"text",autocomplete:"username",required:"","onUpdate:modelValue":n[0]||(n[0]=m=>t.value=m),class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[j,t.value]])])]),r("div",null,[n[3]||(n[3]=r("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"密码",-1)),r("div",mt,[E(r("input",{id:"password",name:"password",type:"password",autocomplete:"current-password",required:"","onUpdate:modelValue":n[1]||(n[1]=m=>e.value=m),class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[j,e.value]])])]),n[4]||(n[4]=tt('<div class="flex items-center justify-between" data-v-5d46b4fe><div class="flex items-center" data-v-5d46b4fe><input id="remember-me" name="remember-me" type="checkbox" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded" data-v-5d46b4fe><label for="remember-me" class="ml-2 block text-sm text-gray-900" data-v-5d46b4fe> 记住我 </label></div><div class="text-sm" data-v-5d46b4fe><a href="#" class="font-medium text-indigo-600 hover:text-indigo-500" data-v-5d46b4fe> 忘记密码？ </a></div></div>',1)),r("div",null,[r("button",{type:"submit",class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:a.value}," 登录 ",8,pt)])],32)])])]))}}),vt=et(ft,[["__scopeId","data-v-5d46b4fe"]]);export{vt as default};
